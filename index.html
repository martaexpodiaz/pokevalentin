<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Detalle de San Valent√≠n</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: #ffe6e6;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-family: Arial, sans-serif;
    overflow: hidden;
    perspective: 1000px; /* esencial para 3D */
  }

  .pokeball-container {
    position: relative;
    width: 180px;
    height: 180px;
    cursor: pointer;
  }

  .pokeball {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
  }

  .top {
    width: 100%;
    height: 50%;
    background: linear-gradient(to bottom, #ff1c1c, #cc0000);
    border: 5px solid black;
    border-bottom: 2px solid black;
    border-radius: 100px 100px 0 0;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
    transform-origin: bottom center;
    box-shadow: inset -5px -5px 15px rgba(0,0,0,0.2);
    transition: transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .bottom {
    width: 100%;
    height: 50%;
    background: white;
    border: 5px solid black;
    border-top: 2px solid black;
    border-radius: 0 0 100px 100px;
    position: absolute;
    bottom: 0;
    left: 0;
    z-index: 1;
    box-shadow: inset -5px 5px 15px rgba(0,0,0,0.1);
  }

  .center {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 35px;
    height: 35px;
    background: white;
    border: 5px solid black;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    z-index: 3;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
  }

  .message {
    margin-top: 25px;
    text-align: center;
    font-size: 1.2em;
    display: none;
    animation: fadeIn 1s forwards;
  }

  .message p:first-child {
    font-weight: bold;
    font-size: 1.5em;
    margin-bottom: 10px;
  }

  @keyframes fadeIn {
    from {opacity:0;}
    to {opacity:1;}
  }

  .hearts {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    pointer-events: none;
  }

  .heart {
    position: absolute;
    width: 20px;
    height: 20px;
    background: red;
    transform: rotate(-45deg);
    animation: floatUp 2s ease forwards;
  }

  .heart::before,
  .heart::after {
    content: "";
    position: absolute;
    width: 20px;
    height: 20px;
    background: red;
    border-radius: 50%;
  }

  .heart::before {
    top: -10px;
    left: 0;
  }

  .heart::after {
    left: 10px;
    top: 0;
  }

  @keyframes floatUp {
    0% { transform: translate(0,0) scale(1) rotate(-45deg); opacity:1;}
    100% { transform: translate(var(--x,0px), -200px) scale(0.7) rotate(-45deg); opacity:0;}
  }

  .kiss {
    position: absolute;
    font-size: 2em;
    animation: floatKiss 1.5s ease forwards;
    pointer-events: none;
  }

  @keyframes floatKiss {
    0% { transform: translateY(0) scale(1); opacity:1; }
    100% { transform: translateY(-120px) scale(0.5); opacity:0; }
  }

  button {
    margin-top: 10px;
    padding: 8px 15px;
    border: none;
    border-radius: 8px;
    background-color: #ff4d4d;
    color: white;
    font-size: 1em;
    cursor: pointer;
    transition: transform 0.2s;
  }

  button:hover {
    transform: scale(1.1);
    background-color: #ff1c1c;
  }
</style>
</head>
<body>

<div class="pokeball-container">
  <div class="pokeball" id="pokeball">
    <div class="top" id="top"></div>
    <div class="bottom"></div>
    <div class="center"></div>
  </div>
</div>

<div class="message" id="message">
  <p>Te elijo a ti ‚ù§Ô∏è</p>
  <p>Aunque estemos lejos, siempre eres mi persona favorita</p>
  <button id="kissButton">Te mando un besito virtual üíã</button>
</div>

<div class="hearts" id="hearts"></div>

<script>
const pokeball = document.getElementById('pokeball');
const top = document.getElementById('top');
const message = document.getElementById('message');
const heartsContainer = document.getElementById('hearts');
const kissButton = document.getElementById('kissButton');

let opened = false;

function createHeart() {
  const heart = document.createElement('div');
  heart.classList.add('heart');
  heart.style.setProperty('--x', (Math.random()*200 - 100) + 'px');
  heartsContainer.appendChild(heart);
  setTimeout(() => heart.remove(), 2000);
}

function createKiss() {
  const kiss = document.createElement('div');
  kiss.classList.add('kiss');
  kiss.style.left = (window.innerWidth/2 + (Math.random()*100 - 50)) + 'px';
  kiss.style.top = (window.innerHeight/2 + (Math.random()*50 - 25)) + 'px';
  kiss.innerText = 'üíã';
  document.body.appendChild(kiss);
  setTimeout(() => kiss.remove(), 1500);
}

function shakePokeball(times, interval, callback) {
  let count = 0;
  const shake = setInterval(() => {
    pokeball.style.transform = 'rotateY(15deg)';
    setTimeout(() => pokeball.style.transform = 'rotateY(-15deg)', 200);
    count++;
    if (count >= times) {
      clearInterval(shake);
      pokeball.style.transform = 'rotateY(0deg)';
      callback();
    }
  }, interval);
}

pokeball.addEventListener('click', () => {
  if (opened) return;

  shakePokeball(3, 2000, () => {
    // abrir tapa 3D realista
    top.style.transform = 'rotateX(-160deg)'; // menos translateY, m√°s realista
    top.style.transition = 'transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55)';

    message.style.display = 'block';

    let heartCount = 0;
    const heartInterval = setInterval(() => {
      createHeart();
      heartCount++;
      if (heartCount >= 20) clearInterval(heartInterval);
    }, 120);

    opened = true;
  });
});

kissButton.addEventListener('click', createKiss);
</script>

</body>
</html>
